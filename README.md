# HeadToHead (H2H) 🎾

**微信小程序 - 网球Group排名系统**

每个网球社区都可以创建自己的Group，记录小团体内的排名。成员可以上传比赛成绩，对手确认后进入排名。

> MVP版本已完成需求设计，文档已交付开发团队

---

## 📚 项目文档

| 文档 | 内容 | 用途 |
|-----|-----|-----|
| **[README.md](README.md)** | 项目概览(本文件) | 快速了解 |
| **[DESIGN_DOC.md](DESIGN_DOC.md)** | 完整产品设计 | 需求详解(13章、1200+行) |
| **[DEVELOPER_GUIDE.md](DEVELOPER_GUIDE.md)** | 开发快速入门 | 技术指南(12周计划) |
| **[DELIVERY_CHECKLIST.md](DELIVERY_CHECKLIST.md)** | 交付清单 | 项目启动检查表 |

---

## 🎯 核心特性

✅ **Group隔离排名** - 每个社区管理自己的排名，互不影响
✅ **双方认可审核** - 比赛需要对手确认，确保数据可信
✅ **赛季制激励** - 支持赛季管理、自动推进、自动计算奖项
✅ **实时排名更新** - 比赛审核通过后立即更新排名
✅ **丰富的数据展示** - 最近5场、交手记录、历史数据、趋势图

---

## 📊 项目信息

| 项目 | 说明 |
|-----|-----|
| **版本** | MVP v1.0 |
| **目标用户** | 100人(初期) |
| **开发周期** | 12-16周 |
| **团队规模** | 8-10人 |
| **目标上线** | 2025年12月 |
| **平台** | 微信小程序 |

---

## 🎮 核心功能

### Group管理
- 创建Group(生成分享码)
- 加入Group(通过分享码)
- 成员管理(creator/admin/member三级权限)
- Group设置(赛季周期、规则等)

### 比赛录入
- 支持单打和双打
- 分数输入(支持多盘)
- 对手审核(需对手approve才能入库)
- 标签系统(ACE王、发球直接得分、老登、德式高压等)

### 排名系统
- **实时排名** - 胜场数 > 最近5场胜率 > 加入时间
- **最近5场** - 快速查看近期战绩
- **交手记录** - 详细的对手对比
- **历史数据** - 全部比赛可搜索

### 赛季制
- **自动推进** - 根据时间自动转换赛季状态
- **动态参赛** - 赛季开始后新加入的成员自动进入
- **自动计算奖项** - MVP、最佳战绩、最活跃、进步最快

### 消息通知
- 比赛待审核通知
- 审核结果通知(approved/rejected)
- 首次成就解锁(如首次MVP)

---

## 🏗️ 技术架构

### 前端
- **框架**: 微信小程序(Taro / uni-app / 原生) - *待定*
- **UI组件**: WeUI / vant-weapp
- **状态管理**: Redux / MobX

### 后端
- **框架**: Node.js Express / Java Spring / Go Gin - *待定*
- **数据库**: MySQL 8.0
- **缓存**: Redis 6.0+
- **认证**: JWT + 微信OAuth2
- **消息队列**: RabbitMQ / Redis Stream(可选)

### 基础设施
- **服务器**: 云平台(腾讯云/阿里云)
- **监控**: Prometheus
- **日志**: ELK或云日志服务
- **CI/CD**: GitHub Actions / Jenkins

---

## 📋 核心数据模型

```
users              用户
groups             Group小团体
group_members      Group成员(角色权限)
seasons            赛季(生命周期管理)
matches            比赛(单打/双打)
match_approvals    比赛审核(多人确认)
season_rankings    赛季排名(快照)
season_awards      赛季奖项
```

详见 [DESIGN_DOC.md Chapter 3](DESIGN_DOC.md#3-数据模型)

---

## 🔄 关键业务规则

### 排名计算
```
Primary:   胜场数 (wins)
Secondary: 最近5场胜率
Tertiary:  加入时间

示例:
玩家A: 10胜, 最近5场 4-1 → 排名1
玩家B: 10胜, 最近5场 2-3 → 排名2
```

### 比赛审核流程
```
单打:
A上传 → B审核 → 通过/拒绝 → 入库/重新提交

双打:
任一人上传 → 其他3人审核 → 全部通过 → 入库
```

### 赛季生命周期
```
pending → active → ended → settled
(自动推进根据时间)
```

详见 [DESIGN_DOC.md Chapter 6](DESIGN_DOC.md#6-业务规则与算法)

---

## 📅 开发计划

| 阶段 | 周数 | 关键产出 |
|-----|-----|---------|
| 启动与架构设计 | W1-2 | 需求评审、技术方案确定 |
| 后端核心开发 | W3-5 | 25+个API、完整数据库 |
| 前端页面开发 | W6-8 | 5个主要页面、前后端联调 |
| 集成与测试 | W9-10 | 灰度测试(20-50用户) |
| 性能优化与准备 | W11 | 微信审核申请、性能达标 |
| 发布上线 | W12 | 灰度上线 → 全量发布 |

详见 [DEVELOPER_GUIDE.md](DEVELOPER_GUIDE.md#-开发阶段计划)

---

## 🚀 快速开始

### 对于产品经理
1. 阅读 [DESIGN_DOC.md](DESIGN_DOC.md) 的前3章(核心功能)
2. 召开项目启动会(参考 [DEVELOPER_GUIDE.md](DEVELOPER_GUIDE.md#-开发阶段计划) 的启动会议程)
3. 收集技术团队的反馈

### 对于技术Lead
1. 详读 [DESIGN_DOC.md](DESIGN_DOC.md) 和 [DEVELOPER_GUIDE.md](DEVELOPER_GUIDE.md)
2. 评审技术选型(框架、数据库等)
3. 为团队组织知识分享

### 对于开发工程师
1. 阅读 [DESIGN_DOC.md](DESIGN_DOC.md)
2. 根据岗位查看相关章节:
   - **后端**: Chapter 3(数据模型) + Chapter 4(API设计) + Chapter 6(业务规则)
   - **前端**: Chapter 7(页面流程) + Chapter 2(功能模块)
3. 等待项目启动会分配任务

### 对于QA
1. 理解核心流程([DESIGN_DOC.md Chapter 2 & 7](DESIGN_DOC.md))
2. 阅读 [DEVELOPER_GUIDE.md](DEVELOPER_GUIDE.md) 的测试策略部分
3. 准备测试计划

---

## ✅ MVP功能清单

### P0 (MVP必做)
- [x] Group创建/加入/分享
- [x] 单打和双打比赛录入
- [x] 比赛审核流程
- [x] 实时排名展示
- [x] 赛季管理(自动推进 + 手动结算)
- [x] 4个基础奖项
- [x] 3种消息通知
- [x] 权限管理(3级角色)

### P1 (V1.1)
- [ ] 比赛申诉流程
- [ ] 用户信誉评分
- [ ] 自定义规则引擎
- [ ] 历史数据高级查询

### P2 (V1.2+)
- [ ] 社交评论功能
- [ ] 数据导出(Excel/PDF)
- [ ] 高级统计分析

---

## 🎯 核心决策

| 维度 | 决策 | 理由 |
|-----|-----|-----|
| 积分系统 | 简单胜场数制 | 易于理解、快速上线 |
| 双打计分 | 个人积分(4人各+1) | 鼓励所有人参与 |
| 排名更新 | 实时(每次approved) | 100人规模可承受 |
| 赛季支持 | ✅ 支持 | 增加激励和参与度 |
| 消息通知 | 3种(待审核/结果/成就) | MVP简洁，P2扩展 |
| 跨Group统计 | ❌ 不支持 | Group隔离设计 |
| 变现方式 | 暂不考虑 | MVP专注用户积累 |

详见 [DESIGN_DOC.md Chapter 13](DESIGN_DOC.md#13-细化需求决策汇总-基于9维度问卷)

---

## 📈 性能目标

MVP版本(100人规模目标):

| 指标 | 目标 |
|-----|-----|
| 排名页加载 | < 500ms |
| 比赛提交 | < 1s |
| 排名更新延迟 | < 100ms |
| 数据库查询(P99) | < 50ms |
| 并发用户 | 100+ 无卡顿 |

---

## 🔒 安全与合规

### 认证与授权
- JWT + 微信OAuth2
- 24小时token有效期 + 自动刷新
- Role-based权限控制(creator/admin/member)

### 数据隐私
- 用户数据(头像、昵称)仅用于功能
- Group内数据完全隔离
- 管理员可查看Group数据

### 防作弊
- MVP版本依赖人工审核(对手approve)
- P1版本考虑信誉评分 + 异常检测 + 申诉流程

详见 [DESIGN_DOC.md Chapter 9](DESIGN_DOC.md#9-风险与合规)

---

## 📞 团队

| 角色 | 名字 | 职责 |
|-----|-----|-----|
| 产品经理 | [TBD] | 需求澄清、产品决策 |
| 技术Lead | [TBD] | 架构设计、技术决策 |
| 后端负责人 | [TBD] | 后端开发 |
| 前端负责人 | [TBD] | 前端开发 |
| QA Lead | [TBD] | 质量保证 |

---

## 📞 常见问题

**Q: 为什么选择简单胜场数而不是ELO?**
A: MVP需要快速上线。简单胜场数易于理解、实现快速、无需复杂配置。后续可迭代到ELO。

**Q: 数据超过100人如何扩展?**
A: 架构已考虑可扩展性，使用Redis缓存、数据库分区、CDN等。详见[DESIGN_DOC.md](DESIGN_DOC.md)。

**Q: 为什么没有自动入库机制?**
A: 安全性优先。数据需由对手确认，防止虚假成绩。

**Q: 微信审核通常需要多久?**
A: 通常2-7天。建议提前1-2周申请。

更多FAQ见 [DESIGN_DOC.md Chapter 12](DESIGN_DOC.md#12-附录faq与澄清)

---

## 🎉 下一步

1. ✅ 需求设计完成 (DESIGN_DOC.md)
2. ✅ 开发指南完成 (DEVELOPER_GUIDE.md)
3. ✅ 交付清单完成 (DELIVERY_CHECKLIST.md)
4. **➡️ 项目启动会** - 确认技术方案、分配任务
5. **➡️ 环境搭建** - 后端、前端、基础设施
6. **➡️ 核心开发** - 按12周计划执行

---

## 📖 推荐阅读顺序

1. **快速理解** - 本文件(README.md) - 5分钟
2. **详细了解** - [DESIGN_DOC.md](DESIGN_DOC.md) 前3章 - 30分钟
3. **技术方案** - [DEVELOPER_GUIDE.md](DEVELOPER_GUIDE.md) - 1小时
4. **完整细节** - [DESIGN_DOC.md](DESIGN_DOC.md) 全文 - 2小时
5. **交付准备** - [DELIVERY_CHECKLIST.md](DELIVERY_CHECKLIST.md) - 20分钟

---

## 🚀 Ready to Build?

文档已完成并交付给开发团队。所有必要的设计决策、技术规范、项目计划都已详细记录。

**现在就可以启动项目了！** 🎮

---

**最后更新**: 2025-10-27
**版本**: 1.0
**维护者**: HeadToHead 项目组
