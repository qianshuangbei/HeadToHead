<!--index.wxml-->
<view class="container">
  <!-- æœªç™»å½•çŠ¶æ€ -->
  <view wx:if="{{!isLoggedIn}}" class="login-prompt">
    <view class="login-icon">ğŸ¾</view>
    <text class="title">HeadToHead</text>
    <text class="subtitle">ç½‘çƒGroupæ’åç³»ç»Ÿ</text>
    <button class="login-btn" bindtap="handleLogin">å¾®ä¿¡ç™»å½•</button>
  </view>

  <!-- å·²ç™»å½• - æ˜¾ç¤ºGroupåˆ—è¡¨ -->
  <view wx:else class="content">
    <!-- é¡¶éƒ¨æ¬¢è¿ -->
    <view class="header">
      <view class="greeting">
        <text class="welcome">æ¬¢è¿ï¼Œ{{userInfo.nickname}}</text>
        <text class="subtitle">é€‰æ‹©ä½ çš„Group</text>
      </view>
      <image class="avatar" src="{{userInfo.avatar}}" mode="aspectFill"></image>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button class="btn btn-primary" bindtap="handleCreateGroup">
        <text>+ åˆ›å»ºGroup</text>
      </button>
      <button class="btn btn-secondary" bindtap="handleJoinGroup">
        <text>+ åŠ å…¥Group</text>
      </button>
    </view>

    <!-- Groupåˆ—è¡¨ -->
    <view class="group-list" wx:if="{{groups.length > 0}}">
      <view class="section-title">æˆ‘çš„Group</view>
      <view class="group-item" wx:for="{{groups}}" wx:key="_id" bindtap="handleSelectGroup" data-group-id="{{item._id}}">
        <view class="group-info">
          <text class="group-name">{{item.name}}</text>
          <text class="group-desc">{{item.member_count}}ä¸ªæˆå‘˜</text>
        </view>
        <view class="arrow">â€º</view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:else>
      <text>æš‚æ— Group</text>
      <text>åˆ›å»ºæˆ–åŠ å…¥ä¸€ä¸ªGroupå¼€å§‹å§ï¼</text>
    </view>
  </view>
</view>
